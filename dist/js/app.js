webpackJsonp([9],{128:function(e,t,n){"use strict";var r,a=n(18),i=n.n(a),s=n(20),o=n.n(s),u=n(21),c=n.n(u),d=n(3),g=n(50),f=n(16),l={currentWedding:null,isLoading:!1,mode:"new"},h={currentWedding:function(e){return e.currentWedding},mode:function(e){return e.mode}},p={getWedding:function(e,t){var n=this,r=e.commit;e.state;return c()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(f.m),e.prev=1,e.next=4,g.a.getWedding(t);case 4:a=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),r(f.l,{errorMessage:e.t0}),e.abrupt("return");case 11:200===a.status?r(f.n,{wedding:a.data}):r(f.i);case 12:case"end":return e.stop()}},e,n,[[1,7]])}))()},updateWedding:function(e,t){var n=this,r=e.commit,a=e.state,i=t.id,s=t.data;return c()(o.a.mark(function e(){var t,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.currentWedding[s.propertyName]!==s.value){e.next=3;break}return r(f.A,s),e.abrupt("return");case 3:if("update"!==a.mode){e.next=24;break}if(r(f.z,s),e.prev=5,!s.propertyName){e.next=14;break}return u={},u[s.propertyName]=s.value,e.next=11,g.a.updateWedding(i,u);case 11:t=e.sent,e.next=15;break;case 14:r(f.l,{errorMessage:"Propertyn name is empty"});case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(5),r(f.l,{errorMessage:e.t0}),e.abrupt("return");case 21:200===t.status?t.data&&(r(f.A,s),r(f.x,t.data)):r(f.y),e.next=25;break;case 24:r(f.A,s);case 25:case"end":return e.stop()}},e,n,[[5,17]])}))()},createWedding:function(e,t){var n=this,r=e.commit;e.state;return c()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(f.c),e.prev=1,e.next=4,g.a.createWedding(t);case 4:a=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),r(f.b,{errorMessage:e.t0}),e.abrupt("return");case 11:200===a.status||201===a.status?(r(f.d,{wedding:a.data}),r(f.a,a.data)):r(f.b);case 12:case"end":return e.stop()}},e,n,[[1,7]])}))()},deleteWedding:function(e,t){var n=this,r=e.commit;e.state;return c()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(f.g),e.prev=1,e.next=4,g.a.deleteWedding(t.id);case 4:a=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),r(f.f,{errorMessage:e.t0}),e.abrupt("return");case 11:200===a.status||201===a.status||204===a.status?(r(f.h,{wedding:a.data}),r(f.e,t)):r(f.f,{errorMessage:a.status});case 12:case"end":return e.stop()}},e,n,[[1,7]])}))()}},v=(r={},i()(r,f.m,function(e){e.isLoading=!0}),i()(r,f.l,function(e,t){var n=t.errorMessage;e.isLoading=!1,e.errorMessage=n}),i()(r,f.n,function(e,t){var n=t.wedding;if(!n)return void(e.isLoading=!1);e.currentWedding=n,e.isLoading=!1}),i()(r,f.c,function(e){e.isLoading=!0}),i()(r,f.b,function(e,t){var n=t.errorMessage;e.isLoading=!1,e.errorMessage=n}),i()(r,f.d,function(e,t){var n=t.wedding;if(!n)return void(e.isLoading=!1);e.mode="update",e.currentWedding=n,e.isLoading=!1}),i()(r,f.g,function(e){e.isLoading=!0}),i()(r,f.f,function(e,t){var n=t.errorMessage;e.isLoading=!1,e.errorMessage=n}),i()(r,f.h,function(e,t){if(!t.wedding)return void(e.isLoading=!1);delete e.currentWedding,e.isLoading=!1}),i()(r,f.t,function(e,t){e.mode=t,"new"===t&&(e.currentWedding={brideHomeFilm:!1,groomHomeFilm:!1,date:Date.now(),confirm:!0})}),i()(r,f.z,function(e,t){t.propertyName&&d.a.set(e.currentWedding,t.propertyName,t.value),e.isLoading=!0}),i()(r,f.A,function(e,t){t.propertyName&&d.a.set(e.currentWedding,t.propertyName,t.value),e.isLoading=!1}),i()(r,f.y,function(e,t){t.errorMessage;e.isLoading=!1}),r);t.a={state:l,getters:h,actions:p,mutations:v}},129:function(e,t,n){"use strict";var r,a=n(18),i=n.n(a),s=n(20),o=n.n(s),u=n(130),c=n.n(u),d=n(21),g=n.n(d),f=n(3),l=n(132),h=n(16),p=this,v={all:[],isLoading:!1,errorMessage:"",isAuthenticated:!1},m={isAuthenticated:function(e){return e.isAuthenticated},authenticationError:function(e){return e.errorMessage}},E={login:function(){var e=g()(o.a.mark(function e(t,n){var r,a=t.commit;t.state;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(h.p),e.prev=1,e.next=4,l.a.authentication(n.email,n.password);case 4:r=e.sent,e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),f.a.cookie.delete("token"),f.a.cookie.delete("authUser"),a(h.o,{errorMessage:e.t0}),e.abrupt("return");case 13:200===r.status||201===r.status?r.data&&r.data.token&&r.data.token.length>0&&(f.a.cookie.set("token",r.data.token,"1Y"),f.a.cookie.set("authUser",c()(r.data.user),"1Y"),a(h.q)):(f.a.cookie.delete("token"),f.a.cookie.delete("authUser"),a(h.o));case 14:case"end":return e.stop()}},e,p,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}(),logout:function(e){var t=e.commit;e.state;t(h.r),f.a.cookie.delete("token"),f.a.cookie.delete("authUser"),t(h.s)}},_=(r={},i()(r,h.p,function(e){e.isLoading=!0,e.isAuthenticated=!1}),i()(r,h.o,function(e,t){var n=t.errorMessage;e.isLoading=!1,e.errorMessage=n,e.isAuthenticated=!1}),i()(r,h.q,function(e){e.isAuthenticated=!0}),i()(r,h.r,function(e){}),i()(r,h.s,function(e){e.isAuthenticated=!1}),r);t.a={state:v,getters:m,actions:E,mutations:_}},132:function(e,t,n){"use strict";var r=n(3);t.a={authentication:function(e,t){return console.log(r.a.http),r.a.axios.post("/auth",{access_token:"12F2G71AD432F69CB1281F7117B0"},{headers:{Authorization:"Basic "+btoa(e+":"+t)}})}}},137:function(e,t){},139:function(e,t){},140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),a=n(143),i=n(52),s=i(r.a,a.a,!1,null,null,null);t.default=s.exports},141:function(e,t,n){"use strict";t.a={state:{backRoute:"/",hash:"",icon:"",iframeTabs:!1,title:"QuieroBesarte App",tabs:[]},set:function(e){this.state.title=e.title||"",this.state.hash=e.hash||"",this.state.icon=e.icon||"",this.state.iframeTabs=e.iframeTabs||!1,this.state.backRoute=e.backRoute||"/",this.state.tabs=e.tabs||[]}}},142:function(e,t,n){"use strict";t.a=[{title:"Eventos",icon:"style",hash:"events",features:[{title:"Calendario de bodas",icon:"style",hash:"weddings"}]},{title:"Ajustes",icon:"settings",hash:"settings",features:[{title:"Aplicacion",icon:"apps",hash:"app"},{title:"Usuario",icon:"account box",hash:"user"}]}]},143:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-layout",{ref:"layout",attrs:{view:"Lhh lpr lFf",reveal:""}},[r("q-toolbar",{attrs:{slot:"header"},slot:"header"},[r("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",value:e.store.backRoute,expression:"store.backRoute",modifiers:{single:!0}}],staticClass:"cordova-only electron-only",attrs:{flat:""}},[r("q-icon",{attrs:{name:"arrow_back"}})],1),e._v(" "),r("q-toolbar-title",[r("q-icon",{directives:[{name:"show",rawName:"v-show",value:e.store.icon,expression:"store.icon"}],staticStyle:{"font-size":"2rem","margin-right":"5px"},attrs:{name:e.store.icon}}),e._v("\n      "+e._s(e.store.title)+"\n    ")],1),e._v(" "),r("q-btn",{staticClass:"within-iframe-hide",attrs:{flat:""},on:{click:function(t){e.$refs.layout.toggleLeft()}}},[r("q-icon",{attrs:{name:"menu"}})],1)],1),e._v(" "),e.store.tabs.length>0?r("q-tabs",{class:{"within-iframe-hide":!e.store.iframeTabs},attrs:{slot:"navigation"},slot:"navigation"},e._l(e.store.tabs,function(t){return r("q-route-tab",{key:t.hash,attrs:{slot:"title",icon:t.icon,to:"/"+e.store.hash+"/"+t.hash,label:t.label,exact:"",replace:""},slot:"title"})})):e._e(),e._v(" "),r("q-scroll-area",{staticClass:"bg-grey-3",staticStyle:{width:"100%",height:"100%"},attrs:{slot:"left"},slot:"left"},[r("div",{staticClass:"row flex-center bg-white",staticStyle:{width:"100%",height:"100px"}},[r("img",{staticStyle:{height:"75px"},attrs:{src:n(144)}}),e._v(" "),r("div",{staticStyle:{"margin-left":"15px"}},[e._v("v0.1")])]),e._v(" "),r("q-list",{attrs:{"no-border":""}},[r("q-side-link",{attrs:{item:"",to:"/showcase",exact:"",replace:""}},[r("q-item-side",{attrs:{icon:"home"}}),e._v(" "),r("q-item-main",{attrs:{label:"Home"}}),e._v(" "),r("q-item-side",{attrs:{right:"",icon:"chevron_right"}})],1),e._v(" "),r("q-item-separator"),e._v(" "),e._l(e.categories,function(t){return[r("q-list-header",{key:t.hash},[e._v("\n          "+e._s(t.title)+"\n        ")]),e._v(" "),e._l(t.features,function(n){return r("q-side-link",{key:n.hash,attrs:{item:"",to:"/"+t.hash+"/"+n.hash,replace:""}},[r("q-item-side",{attrs:{icon:n.icon}}),e._v(" "),r("q-item-main",{attrs:{label:n.title}}),e._v(" "),r("q-item-side",{attrs:{right:"",icon:"chevron_right"}})],1)}),e._v(" "),r("q-item-separator",{key:"separator-"+t.hash})]}),e._v(" "),r("q-item-separator"),e._v(" "),r("q-side-link",{attrs:{item:"",to:"/logout",replace:""}},[r("q-item-side",{attrs:{icon:"exit to app"}}),e._v(" "),r("q-item-main",{attrs:{label:"Cerrar sesi√≥n"}})],1)],2)],1),e._v(" "),r("router-view")],1)},a=[],i={render:r,staticRenderFns:a};t.a=i},144:function(e,t,n){e.exports=n.p+"img/qb_logo.86e5dc5.svg"},16:function(e,t,n){"use strict";n.d(t,"j",function(){return r}),n.d(t,"k",function(){return a}),n.d(t,"i",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"x",function(){return o}),n.d(t,"e",function(){return u}),n.d(t,"m",function(){return c}),n.d(t,"n",function(){return d}),n.d(t,"l",function(){return g}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return h}),n.d(t,"t",function(){return p}),n.d(t,"z",function(){return v}),n.d(t,"A",function(){return m}),n.d(t,"y",function(){return E}),n.d(t,"g",function(){return _}),n.d(t,"h",function(){return w}),n.d(t,"f",function(){return b}),n.d(t,"v",function(){return k}),n.d(t,"w",function(){return L}),n.d(t,"u",function(){return D}),n.d(t,"p",function(){return S}),n.d(t,"q",function(){return A}),n.d(t,"o",function(){return x}),n.d(t,"r",function(){return T}),n.d(t,"s",function(){return y});var r="GET_WEDDINGS_REQUEST",a="GET_WEDDINGS_SUCCESS",i="GET_WEDDINGS_FAILURE",s="ADD_ITEM_ON_WEDDINGS",o="UPDATE_ITEM_ON_WEDDINGS",u="DELETE_ITEM_ON_WEDDINGS",c="GET_WEDDING_REQUEST",d="GET_WEDDING_SUCCESS",g="GET_WEDDING_FAILURE",f="CREATE_WEDDING_REQUEST",l="CREATE_WEDDING_SUCCESS",h="CREATE_WEDDING_FAILURE",p="SET_WEDDING_MODE",v="UPDATE_WEDDING_REQUEST",m="UPDATE_WEDDING_SUCCESS",E="UPDATE_WEDDING_FAILURE",_="DELETE_WEDDING_REQUEST",w="DELETE_WEDDING_SUCCESS",b="DELETE_WEDDING_FAILURE",k="SET_YEAR_REQUEST",L="SET_YEAR_SUCCESS",D="SET_YEAR_FAILURE",S="LOGIN_REQUEST",A="LOGIN_SUCCESS",x="LOGIN_FAILURE",T="LOGOUT_REQUEST",y="LOGOUT_SUCCESS"},50:function(e,t,n){"use strict";var r=n(3);t.a={getWedding:function(e){var t=r.a.cookie.get("token");return r.a.axios.get("/weddings/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}})},createWedding:function(e){var t=r.a.cookie.get("token");return r.a.axios.post("/weddings",e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}})},updateWedding:function(e,t){var n=r.a.cookie.get("token");return r.a.axios.put("/weddings/"+e,t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}})},deleteWedding:function(e){var t=r.a.cookie.get("token");return r.a.axios.delete("/weddings/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}})},getWeddings:function(e,t,n){var a="?limit="+t+"&page="+(e+1)+"&sort=Date&ini="+n+"-1-1&end="+n+"-12-31",i=r.a.cookie.get("token");return r.a.axios.get("/weddings/"+a,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}})}}},51:function(e,t,n){"use strict";var r=n(141),a=n(142),i=n(28);t.a={components:{QScrollArea:i.E,QList:i.A,QSideLink:i.F,QListHeader:i.B,QItemSide:i.x,QItemMain:i.v,QItemSeparator:i.w,QBtn:i.c,QLayout:i.z,QToolbar:i.J,QToolbarTitle:i.K,QIcon:i.r,QTabs:i.H,QRouteTab:i.D},directives:{GoBack:i.b},data:function(){return{categories:a.a,store:r.a.state}},methods:{logout:function(e,t){var n=this;this.$store.dispatch("logout").then(function(){n.$router.replace("/login")})}}}},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),a=n(59),i=n.n(a),s=n(61),o=n.n(s),u=n(80),c=n.n(u),d=n(28),g=n(81),f=n(84),l=n(133),h=n.n(l),p=n(136),v=(n.n(p),n(138));n.n(v);n(55),r.a.config.productionTip=!1;var m=o.a.create({baseURL:"https://qbapi.azurewebsites.net/api"});r.a.use(d.O),r.a.use(i.a),r.a.use(c.a,m),r.a.use(h.a),d.O.start(function(){new r.a({el:"#q-app",store:f.a,router:g.a,render:function(e){return e(n(140).default)}})})},55:function(e,t){},81:function(e,t,n){"use strict";function r(e){return function(){return n(83)("./"+e+".vue")}}var a=n(3),i=n(82);a.a.use(i.a);var s=new i.a({mode:"hash",routes:[{path:"/",component:r("home"),meta:{requiresAuth:!0}},{path:"/login",component:r("login")},{path:"/logout",component:r("logout"),meta:{requiresAuth:!0}},{path:"/events/weddings",component:r("events/weddings/weddings-list"),meta:{requiresAuth:!0}},{path:"/events/weddings/:id",component:r("events/weddings/wedding-detail"),meta:{requiresAuth:!0}},{path:"/events/wedding",component:r("events/weddings/wedding-detail"),meta:{requiresAuth:!0}},{path:"*",component:r("error404")}]});s.beforeResolve(function(e,t,n){var r=a.a.cookie.get("authUser");e.meta.requiresAuth?r?"/"===e.path&&r?n("/events/weddings"):n():n("/login"):"/login"===e.path&&r?n("/events/weddings"):n()}),t.a=s},83:function(e,t,n){function r(e){var t=a[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var a={"./error404.vue":[147,4],"./events/weddings/wedding-detail.vue":[148,3],"./events/weddings/weddings-list.vue":[149,7],"./home.vue":[150,2],"./login.vue":[151,6],"./logout.vue":[152,5],"./settings/app.vue":[153,1],"./settings/user.vue":[154,0]};r.keys=function(){return Object.keys(a)},r.id=83,e.exports=r},84:function(e,t,n){"use strict";var r=n(3),a=n(53),i=n(85),s=n(86),o=n(87),u=n(128),c=n(129);r.a.use(a.a);t.a=new a.a.Store({actions:i,getters:s,modules:{weddingDetail:u.a,weddings:o.a,authentication:c.a},strict:!1})},85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"actionA",function(){return r});var r=function(e,t){(0,e.commit)("actionA",{})}},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"methodA",function(){return r});var r=function(e){return e}},87:function(e,t,n){"use strict";var r,a=n(18),i=n.n(a),s=n(20),o=n.n(s),u=n(21),c=n.n(u),d=n(3),g=n(50),f=n(16),l=this,h={all:[],weddings:[],isLoading:!1,errorMessage:"",currentPage:0,selectedYear:(new Date).getFullYear(),isLastPage:!1},p={weddings:function(e){return e.weddings},isLoading:function(e){return e.isLoading},error:function(e){return e.errorMessage},currentPage:function(e){return e.currentPage},isLastPage:function(e){return e.isLastPage},selectedYear:function(e){return e.selectedYear}},v={getWeddings:function(){var e=c()(o.a.mark(function e(t,n){var r,a,i=t.commit;t.state;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(f.j),e.prev=1,e.next=4,g.a.getWeddings(n.page,5,n.year);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),i(f.i,{errorMessage:e.t0}),e.abrupt("return");case 11:200===r.status?(a=5!==r.data.length,i(f.k,{weddings:r.data,isLastPage:a})):i(f.i);case 12:case"end":return e.stop()}},e,l,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}(),setYear:function(e,t){var n=e.commit;e.state;n(f.v),n(f.w,t.year)}},m=(r={},i()(r,f.j,function(e){e.isLoading=!0}),i()(r,f.i,function(e,t){var n=t.errorMessage;e.isLoading=!1,e.errorMessage=n}),i()(r,f.k,function(e,t){var n=t.weddings,r=t.isLastPage;if(n&&0===n.length)return void(e.isLoading=!1);for(var a=[],i=0;i<n.length;i++)a.push(n[i]);e.weddings=e.weddings.concat(a),e.currentPage++,e.isLoading=!1,e.isLastPage=r}),i()(r,f.v,function(e){e.isLoading=!0}),i()(r,f.w,function(e,t){e.isLoading=!1,e.weddings=[],e.currentPage=0,e.isLastPage=!1,e.selectedYear=t}),i()(r,f.u,function(e,t){t.errorMessage;e.isLoading=!1}),i()(r,f.a,function(e,t){var n=e.weddings.findIndex(function(e){return e.date>=t.date});-1!==n&&e.weddings.splice(n,0,t)}),i()(r,f.x,function(e,t){var n=e.weddings.findIndex(function(e){return e.id===t.id});-1!==n&&d.a.set(e.weddings,n,t)}),i()(r,f.e,function(e,t){var n=e.weddings.findIndex(function(e){return e.id===t.id});-1!==n&&d.a.delete(e.weddings,n)}),r);t.a={state:h,getters:p,actions:v,mutations:m}}},[54]);