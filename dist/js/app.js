webpackJsonp([10],{128:function(e,t,n){"use strict";var a,r=n(18),i=n.n(r),s=n(20),o=n.n(s),u=n(21),c=n.n(u),d=n(50),g=n(28),l={currentWedding:null,isLoading:!1},f={currentWedding:function(e){return e.currentWedding}},h={getWedding:function(e,t){var n=this,a=e.commit;e.state;return c()(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(g.e),e.prev=1,e.next=4,d.a.getWedding(t);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),a(g.d,{errorMessage:e.t0}),e.abrupt("return");case 11:200===r.status?a(g.f,{wedding:r.data}):a(g.a);case 12:case"end":return e.stop()}},e,n,[[1,7]])}))()},updateWedding:function(e,t){var n=this,a=e.commit,r=e.state,i=t.id,s=t.data;return c()(o.a.mark(function e(){var t,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.currentWedding[s.propertyName]!==s.value){e.next=3;break}return a(g.r,s),e.abrupt("return");case 3:if(a(g.q,s),e.prev=4,!s.propertyName){e.next=13;break}return u={},u[s.propertyName]=s.value,e.next=10,d.a.updateWedding(i,u);case 10:t=e.sent,e.next=14;break;case 13:a(g.d,{errorMessage:"Propertyn name is empty"});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(4),a(g.d,{errorMessage:e.t0}),e.abrupt("return");case 20:200===t.status?t.data&&(a(g.r,s),a(g.o,t.data)):a(g.p);case 21:case"end":return e.stop()}},e,n,[[4,16]])}))()}},p=(a={},i()(a,g.e,function(e){e.isLoading=!0}),i()(a,g.d,function(e,t){var n=t.errorMessage;e.isLoading=!1,e.errorMessage=n}),i()(a,g.f,function(e,t){var n=t.wedding;if(!n)return void(e.isLoading=!1);e.currentWedding=n,e.isLoading=!1}),i()(a,g.q,function(e,t){t.propertyName&&(e.currentWedding[t.propertyName]=t.value),e.isLoading=!0}),i()(a,g.r,function(e,t){t.propertyName&&(e.currentWedding[t.propertyName]=t.value),e.isLoading=!1}),i()(a,g.p,function(e,t){t.errorMessage;e.isLoading=!1}),a);t.a={state:l,getters:f,actions:h,mutations:p}},129:function(e,t,n){"use strict";var a,r=n(18),i=n.n(r),s=n(20),o=n.n(s),u=n(130),c=n.n(u),d=n(21),g=n.n(d),l=n(4),f=n(132),h=n(28),p=this,v={all:[],isLoading:!1,errorMessage:"",isAuthenticated:!1},m={isAuthenticated:function(e){return e.isAuthenticated},authenticationError:function(e){return e.errorMessage}},_={login:function(){var e=g()(o.a.mark(function e(t,n){var a,r=t.commit;t.state;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(h.h),e.prev=1,e.next=4,f.a.authentication(n.email,n.password);case 4:a=e.sent,e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),l.a.cookie.delete("token"),l.a.cookie.delete("authUser"),r(h.g,{errorMessage:e.t0}),e.abrupt("return");case 13:200===a.status||201===a.status?a.data&&a.data.token&&a.data.token.length>0&&(l.a.cookie.set("token",a.data.token,"1Y"),l.a.cookie.set("authUser",c()(a.data.user),"1Y"),r(h.i)):(l.a.cookie.delete("token"),l.a.cookie.delete("authUser"),r(h.g));case 14:case"end":return e.stop()}},e,p,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}(),logout:function(e){var t=e.commit;e.state;t(h.j),l.a.cookie.delete("token"),l.a.cookie.delete("authUser"),t(h.k)}},w=(a={},i()(a,h.h,function(e){e.isLoading=!0,e.isAuthenticated=!1}),i()(a,h.g,function(e,t){var n=t.errorMessage;e.isLoading=!1,e.errorMessage=n,e.isAuthenticated=!1}),i()(a,h.i,function(e){e.isAuthenticated=!0}),i()(a,h.j,function(e){}),i()(a,h.k,function(e){e.isAuthenticated=!1}),a);t.a={state:v,getters:m,actions:_,mutations:w}},132:function(e,t,n){"use strict";var a=n(4);t.a={authentication:function(e,t){return console.log(a.a.http),a.a.axios.post("/auth",{access_token:"12F2G71AD432F69CB1281F7117B0"},{headers:{Authorization:"Basic "+btoa(e+":"+t)}})}}},134:function(e,t){},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(51),r=n(138),i=n(52),s=i(a.a,r.a,!1,null,null,null);t.default=s.exports},136:function(e,t,n){"use strict";t.a={state:{backRoute:"/",hash:"",icon:"",iframeTabs:!1,title:"QuieroBesarte App",tabs:[]},set:function(e){this.state.title=e.title||"",this.state.hash=e.hash||"",this.state.icon=e.icon||"",this.state.iframeTabs=e.iframeTabs||!1,this.state.backRoute=e.backRoute||"/",this.state.tabs=e.tabs||[]}}},137:function(e,t,n){"use strict";t.a=[{title:"Eventos",icon:"style",hash:"events",features:[{title:"Calendario de bodas",icon:"style",hash:"weddings"}]},{title:"Ajustes",icon:"settings",hash:"settings",features:[{title:"Aplicacion",icon:"apps",hash:"app"},{title:"Usuario",icon:"account box",hash:"user"}]}]},138:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{ref:"layout",attrs:{view:"Lhh lpr lFf",reveal:""}},[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",value:e.store.backRoute,expression:"store.backRoute",modifiers:{single:!0}}],staticClass:"cordova-only electron-only",attrs:{flat:""}},[a("q-icon",{attrs:{name:"arrow_back"}})],1),e._v(" "),a("q-toolbar-title",[a("q-icon",{directives:[{name:"show",rawName:"v-show",value:e.store.icon,expression:"store.icon"}],staticStyle:{"font-size":"2rem","margin-right":"5px"},attrs:{name:e.store.icon}}),e._v("\n      "+e._s(e.store.title)+"\n    ")],1),e._v(" "),a("q-btn",{staticClass:"within-iframe-hide",attrs:{flat:""},on:{click:function(t){e.$refs.layout.toggleLeft()}}},[a("q-icon",{attrs:{name:"menu"}})],1)],1),e._v(" "),e.store.tabs.length>0?a("q-tabs",{class:{"within-iframe-hide":!e.store.iframeTabs},attrs:{slot:"navigation"},slot:"navigation"},e._l(e.store.tabs,function(t){return a("q-route-tab",{key:t.hash,attrs:{slot:"title",icon:t.icon,to:"/"+e.store.hash+"/"+t.hash,label:t.label,exact:"",replace:""},slot:"title"})})):e._e(),e._v(" "),a("q-scroll-area",{staticClass:"bg-grey-3",staticStyle:{width:"100%",height:"100%"},attrs:{slot:"left"},slot:"left"},[a("div",{staticClass:"row flex-center bg-white",staticStyle:{width:"100%",height:"100px"}},[a("img",{staticStyle:{height:"75px"},attrs:{src:n(139)}}),e._v(" "),a("div",{staticStyle:{"margin-left":"15px"}},[e._v("v0.1")])]),e._v(" "),a("q-list",{attrs:{"no-border":""}},[a("q-side-link",{attrs:{item:"",to:"/showcase",exact:"",replace:""}},[a("q-item-side",{attrs:{icon:"home"}}),e._v(" "),a("q-item-main",{attrs:{label:"Home"}}),e._v(" "),a("q-item-side",{attrs:{right:"",icon:"chevron_right"}})],1),e._v(" "),a("q-item-separator"),e._v(" "),e._l(e.categories,function(t){return[a("q-list-header",{key:t.hash},[e._v("\n          "+e._s(t.title)+"\n        ")]),e._v(" "),e._l(t.features,function(n){return a("q-side-link",{key:n.hash,attrs:{item:"",to:"/"+t.hash+"/"+n.hash,replace:""}},[a("q-item-side",{attrs:{icon:n.icon}}),e._v(" "),a("q-item-main",{attrs:{label:n.title}}),e._v(" "),a("q-item-side",{attrs:{right:"",icon:"chevron_right"}})],1)}),e._v(" "),a("q-item-separator",{key:"separator-"+t.hash})]}),e._v(" "),a("q-item-separator"),e._v(" "),a("q-side-link",{attrs:{item:"",to:"/logout",replace:""}},[a("q-item-side",{attrs:{icon:"exit to app"}}),e._v(" "),a("q-item-main",{attrs:{label:"Cerrar sesi√≥n"}})],1)],2)],1),e._v(" "),a("router-view")],1)},r=[],i={render:a,staticRenderFns:r};t.a=i},139:function(e,t,n){e.exports=n.p+"img/qb_logo.1978e54.svg"},28:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"o",function(){return s}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"q",function(){return d}),n.d(t,"r",function(){return g}),n.d(t,"p",function(){return l}),n.d(t,"m",function(){return f}),n.d(t,"n",function(){return h}),n.d(t,"l",function(){return p}),n.d(t,"h",function(){return v}),n.d(t,"i",function(){return m}),n.d(t,"g",function(){return _}),n.d(t,"j",function(){return w}),n.d(t,"k",function(){return b});var a="GET_WEDDINGS_REQUEST",r="GET_WEDDINGS_SUCCESS",i="GET_WEDDINGS_FAILURE",s="UPDATE_ITEM_ON_WEDDINGS",o="GET_WEDDING_REQUEST",u="GET_WEDDING_SUCCESS",c="GET_WEDDING_FAILURE",d="UPDATE_WEDDING_REQUEST",g="UPDATE_WEDDING_SUCCESS",l="UPDATE_WEDDING_FAILURE",f="SET_YEAR_REQUEST",h="SET_YEAR_SUCCESS",p="SET_YEAR_FAILURE",v="LOGIN_REQUEST",m="LOGIN_SUCCESS",_="LOGIN_FAILURE",w="LOGOUT_REQUEST",b="LOGOUT_SUCCESS"},50:function(e,t,n){"use strict";var a=n(4);t.a={getWedding:function(e){var t=a.a.cookie.get("token");return a.a.axios.get("/weddings/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}})},updateWedding:function(e,t){var n=a.a.cookie.get("token");return a.a.axios.put("/weddings/"+e,t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}})},getWeddings:function(e,t,n){var r="?limit="+t+"&page="+(e+1)+"&sort=Date&ini="+n+"-1-1&end="+n+"-12-31",i=a.a.cookie.get("token");return a.a.axios.get("/weddings/"+r,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}})}}},51:function(e,t,n){"use strict";var a=n(136),r=n(137),i=n(29);t.a={components:{QScrollArea:i.D,QList:i.z,QSideLink:i.E,QListHeader:i.A,QItemSide:i.w,QItemMain:i.u,QItemSeparator:i.v,QBtn:i.b,QLayout:i.y,QToolbar:i.I,QToolbarTitle:i.J,QIcon:i.q,QTabs:i.G,QRouteTab:i.C},directives:{GoBack:i.a},data:function(){return{categories:r.a,store:a.a.state}},methods:{logout:function(e,t){var n=this;this.$store.dispatch("logout").then(function(){n.$router.replace("/login")})}}}},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),r=n(59),i=n.n(r),s=n(61),o=n.n(s),u=n(80),c=n.n(u),d=n(29),g=n(81),l=n(84),f=n(133);n.n(f);n(55),a.a.config.productionTip=!1;var h=o.a.create({baseURL:"https://qbapi.azurewebsites.net/api"});a.a.use(d.N),a.a.use(i.a),a.a.use(c.a,h),d.N.start(function(){new a.a({el:"#q-app",store:l.a,router:g.a,render:function(e){return e(n(135).default)}})})},55:function(e,t){},81:function(e,t,n){"use strict";function a(e){return function(){return n(83)("./"+e+".vue")}}var r=n(4),i=n(82);r.a.use(i.a);var s=new i.a({mode:"hash",routes:[{path:"/",component:a("home"),meta:{requiresAuth:!0}},{path:"/login",component:a("login")},{path:"/logout",component:a("logout"),meta:{requiresAuth:!0}},{path:"/events/weddings",component:a("events/weddings/weddings-list"),meta:{requiresAuth:!0}},{path:"/events/weddings/:id",component:a("events/weddings/wedding-detail"),meta:{requiresAuth:!0}},{path:"/events/weddings/new",component:a("events/weddings/wedding-new"),meta:{requiresAuth:!0}},{path:"*",component:a("error404")}]});s.beforeResolve(function(e,t,n){var a=r.a.cookie.get("authUser");e.meta.requiresAuth?a?"/"===e.path&&a?n("/events/weddings"):n():n("/login"):"/login"===e.path&&a?n("/events/weddings"):n()}),t.a=s},83:function(e,t,n){function a(e){var t=r[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var r={"./error404.vue":[142,5],"./events/weddings/wedding-detail.vue":[143,4],"./events/weddings/wedding-new.vue":[144,3],"./events/weddings/weddings-list.vue":[145,8],"./home.vue":[146,2],"./login.vue":[147,7],"./logout.vue":[148,6],"./settings/app.vue":[149,1],"./settings/user.vue":[150,0]};a.keys=function(){return Object.keys(r)},a.id=83,e.exports=a},84:function(e,t,n){"use strict";var a=n(4),r=n(53),i=n(85),s=n(86),o=n(87),u=n(128),c=n(129);a.a.use(r.a);t.a=new r.a.Store({actions:i,getters:s,modules:{weddingDetail:u.a,weddings:o.a,authentication:c.a},strict:!1})},85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"actionA",function(){return a});var a=function(e,t){(0,e.commit)("actionA",{})}},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"methodA",function(){return a});var a=function(e){return e}},87:function(e,t,n){"use strict";var a,r=n(18),i=n.n(r),s=n(20),o=n.n(s),u=n(21),c=n.n(u),d=n(4),g=n(50),l=n(28),f=this,h={all:[],weddings:[],isLoading:!1,errorMessage:"",currentPage:0,selectedYear:(new Date).getFullYear(),isLastPage:!1},p={weddings:function(e){return e.weddings},isLoading:function(e){return e.isLoading},error:function(e){return e.errorMessage},currentPage:function(e){return e.currentPage},isLastPage:function(e){return e.isLastPage},selectedYear:function(e){return e.selectedYear}},v={getWeddings:function(){var e=c()(o.a.mark(function e(t,n){var a,r,i=t.commit;t.state;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(l.b),e.prev=1,e.next=4,g.a.getWeddings(n.page,5,n.year);case 4:a=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),i(l.a,{errorMessage:e.t0}),e.abrupt("return");case 11:200===a.status?(r=5!==a.data.length,i(l.c,{weddings:a.data,isLastPage:r})):i(l.a);case 12:case"end":return e.stop()}},e,f,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}(),setYear:function(e,t){var n=e.commit;e.state;n(l.m),n(l.n,t.year)}},m=(a={},i()(a,l.b,function(e){e.isLoading=!0}),i()(a,l.a,function(e,t){var n=t.errorMessage;e.isLoading=!1,e.errorMessage=n}),i()(a,l.c,function(e,t){var n=t.weddings,a=t.isLastPage;if(n&&0===n.length)return void(e.isLoading=!1);for(var r=[],i=0;i<n.length;i++)r.push(n[i]);e.weddings=e.weddings.concat(r),e.currentPage++,e.isLoading=!1,e.isLastPage=a}),i()(a,l.m,function(e){e.isLoading=!0}),i()(a,l.n,function(e,t){e.isLoading=!1,e.weddings=[],e.currentPage=0,e.isLastPage=!1,e.selectedYear=t}),i()(a,l.l,function(e,t){t.errorMessage;e.isLoading=!1}),i()(a,l.o,function(e,t){for(var n=0,a=0;a<e.weddings.length;a++)e.weddings[a].id===t.id&&(n=a);d.a.set(e.weddings,n,t)}),a);t.a={state:h,getters:p,actions:v,mutations:m}}},[54]);